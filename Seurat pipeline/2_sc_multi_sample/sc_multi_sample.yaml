# Usage : nextflow run /data/humangen_mouse/scpipeline/src/sc_multi_sample.nf -params-file /data/humangen_mouse/scpipeline/sc_multi_sample.yaml --id ${SCRATCH/"/scratch/"/}

# Provide full path to the "xxx_normalized.rds" files generated by the sc_p_sample_main.sh pipeline. Seperate files in new lines with "-" bullet points
in_seurat_rds:
- "/data/SCN/per_sample/normalized/GD17_normalized.rds"
- "/data/SCN/per_sample/normalized/PND02_normalized.rds"
- "/data/SCN/per_sample/normalized/PND10_normalized.rds"
- "/data/SCN/per_sample/normalized/PND30_normalized.rds"

# Set the number of computing cores. Hardwired to 8. Do not change if you didn't change the internal script
ncores: 8

# Parameters for the pipeline

# Merging or Integration
task: "merge"       # Choose: merge, integrate-seurat, integrate-harmony
method: "standard"              # Choose: standard or SCT, Use the same method used to process single sample if task = "integrate-seurat"
project: "SCN" # Name of the merged or integrated dataset. Used to name output file. No "_" allowed
nhvg: 2500                      # Number of relevant features. Used for all three tasks
npcs: 30                        # Required only for integrate-seurat or integrate-harmony. Number of PCs.
nclust:                         # Required only for integrate-harmony
reference:                     # [optional] The # of the sample(s) to be used as the reference during integration. Used only for task integrate-seurat, Provide comma seperated values if you have more than 1 reference. Leave it empty if not inegrating with reference
integrateBy: 		         # Only for integrate-harmony task. This is usually "orig.ident", "group", or "replicate", but can be any other metadata names. 
sampleTree:                     # [optional, Advanced syntax] Specify the order of integration for integrate-seurat
covars:                         # [optional] Which metadata to regress out? Comma separated. Used for all tasks

# dim_reduction

#cluster
res: "0.05,0.1,0.2,0.5"

#DE genes
min_cell_group: 1
min_pct: 0.01
logfc_threshold: 0.2
res_de_genes: 0.1
test_use: 'wilcox' # 'roc','wilcox' (default in Seurat),'negbin'
features: #List of genes to be visualized in UMAP space(comma seperated value)
no_of_pages:  # Number of pages to split the genes for feature plot
# Folder where results should be saved. Need not exist
outfolder: "/data/SCN/ms_merge/"
